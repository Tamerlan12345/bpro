## 2026-02-25 — [Backend/Error Handling]
**Проблема:** Создание чата или департамента с несуществующим ID родителя (Department/User) вызывало ошибку 500 (Foreign Key Violation). Пользователь получал "Internal Server Error" вместо понятного сообщения.
**Решение:** В `POST /api/departments` и `POST /api/chats` добавлен перехват ошибки PostgreSQL `23503` (Foreign Key Violation). Теперь возвращается статус 400 с сообщением "User not found" или "Department not found".
**Безопасность:** Логика не изменена, добавлен только обработчик специфичного кода ошибки. Существующие проверки (например, на дубликаты) сохранены. Покрытие тестами обеспечено.
